<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="/layout/template.xhtml">

<ui:define name="body">
<h1> #{messages.CU537_titulo}</h1>
    <h:form id="planCapacitacion" styleClass="edit" enctype="multipart/form-data">

        <rich:panel>
            
           <rich:panel >  <f:facet name="header">#{messages.CU537_capacitacion}</f:facet>
			<h:panelGrid columns="2">
						<s:decorate id="archivoPlanAnualField"
							template="/layout/edit.xhtml">
							<ui:define name="label">#{messages.CU537_plantilla_anual}<span
									class="required">*</span>
							</ui:define>
							<s:fileUpload size="20"
								contentType="#{configurarItemCapacitacioFC.contentType1}"
								data="#{configurarItemCapacitacioFC.uploadedFile1}"
								fileName="#{configurarItemCapacitacioFC.fileName1}">
								<s:conversationPropagation type="join" />
							</s:fileUpload>
						</s:decorate>
						<s:decorate id="archivoPlanAnualDescargaField"
							template="/layout/edit.xhtml">
							<h:inputText disabled="true" 
								value="#{configurarItemCapacitacioFC.nombreDocAnual}"
								id="nombrePlanAnualDoc" style=" width : 389px;" />
							<h:commandButton id="descargarPlanAnual"
								value="#{messages.gral_descargar}" target="_blank"
								rendered="#{configurarItemCapacitacioFC.idDoc1!=null}"
								action="#{configurarItemCapacitacioFC.descargar(configurarItemCapacitacioFC.planAnualAdjunto.idAdjuntosCap)}">
								<rich:toolTip for="descargarPlanAnual">
									<span> #{messages.CU495_descargar_doc}</span>
								</rich:toolTip>
							</h:commandButton>
						</s:decorate>
						
						<s:decorate id="archivoPlanEjecucionField"
							template="/layout/edit.xhtml">
							<ui:define name="label">#{messages.CU537_plantilla_ejecucion}<span
									class="required">*</span>
							</ui:define>
							<s:fileUpload size="20"
								contentType="#{configurarItemCapacitacioFC.contentType2}"
								data="#{configurarItemCapacitacioFC.uploadedFile2}"
								fileName="#{configurarItemCapacitacioFC.fileName2}">
								<s:conversationPropagation type="join" />
							</s:fileUpload>
						</s:decorate>
						<s:decorate id="archivoPlanEjecucionDescargaField"
							template="/layout/edit.xhtml">
							<h:inputText disabled="true"  
								value="#{configurarItemCapacitacioFC.nombreDocEjecucion}"
								id="nombrePlanEjecucionDoc" style=" width : 389px;" />
							<h:commandButton id="descargarPlanEjecucion"
								value="#{messages.gral_descargar}" target="_blank"
								rendered="#{configurarItemCapacitacioFC.idDoc2!=null}"
								action="#{configurarItemCapacitacioFC.descargar(configurarItemCapacitacioFC.ejecucionAdjunto.idAdjuntosCap)}">
								<rich:toolTip for="descargarPlanEjecucion">
									<span> #{messages.CU495_descargar_doc}</span>
								</rich:toolTip>
							</h:commandButton>
						</s:decorate>
						<s:decorate id="archivoModeloContratoField"
							template="/layout/edit.xhtml">
							<ui:define name="label">#{messages.CU537_modelo_contrato}<span
									class="required">*</span>
							</ui:define>
							<s:fileUpload size="20"
								contentType="#{configurarItemCapacitacioFC.contentType3}"
								data="#{configurarItemCapacitacioFC.uploadedFile3}"
								fileName="#{configurarItemCapacitacioFC.fileName3}">
								<s:conversationPropagation type="join" />
							</s:fileUpload>
						</s:decorate>
						<s:decorate id="archivoModeloContratoDescargaField"
							template="/layout/edit.xhtml">
							<h:inputText disabled="true"  
								value="#{configurarItemCapacitacioFC.nombreDocmodContrato}"
								id="nombreModeloContratoDoc" style=" width : 389px;" />
							<h:commandButton id="descargarModeloContrato"
								value="#{messages.gral_descargar}" target="_blank"
								rendered="#{configurarItemCapacitacioFC.idDoc3!=null}"
								action="#{configurarItemCapacitacioFC.descargar(configurarItemCapacitacioFC.modeloContratoAdjunto.idAdjuntosCap)}">
								<rich:toolTip for="descargarModeloContrato">
									<span> #{messages.CU495_descargar_doc}</span>
								</rich:toolTip>
							</h:commandButton>
						</s:decorate>
						
				</h:panelGrid>
				<h:panelGrid columns="1">
				<rich:spacer height="30"/>
				<h:outputText value="#{messages.msg_obs_save}"  styleClass="labelClass"/>
				<h:commandButton id="save"
                          value="#{messages.msg_save}"
                         action="#{configurarItemCapacitacioFC.save()}"
                        onclick="return confirm('#{messages.msg_confirm_save}');"/>
               	</h:panelGrid>
		</rich:panel>
		<rich:panel id="datosPortalCapacitacion">
		 <f:facet name="header">#{messages.CU537_datos_portal}</f:facet>
		 	
			
			<h:panelGrid columns="1">
			 <s:decorate id="textoField" template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.CU537_texto}</ui:define>
                <h:inputTextarea id="texto"
                               cols="80"
                               rows="6"
                         value="#{configurarItemCapacitacioFC.texto}">
                  <f:validateLength maximum="500" />
        </h:inputTextarea>
            </s:decorate>
			  <h:outputText value="#{messages.msg_obs_update}"  styleClass="labelClass"/>
			</h:panelGrid>
			
			</rich:panel>
			<a:outputPanel ajaxRendered="true" id="outPanelBotones" >
			<div class="actionButtons">
			<h:commandButton id="update" 
                          value="#{messages.msg_update}"
                         action="#{configurarItemCapacitacioFC.update()}"
                          onclick="return confirm('#{messages.msg_confirm_update}');"
                     disabled="#{!configurarItemCapacitacioFC.habEdit}"/>
                       
            <h:commandButton id="cancelEdit"  disabled="#{!configurarItemCapacitacioFC.habEdit}"
                   value="#{messages.msg_cancel}" action="#{configurarItemCapacitacioFC.cancelar()}" /> 
			</div>
			</a:outputPanel>
			<rich:panel id="panelDocImp"> <f:facet name="header">#{messages.CU537_datos_portal} (#{configurarItemCapacitacioFC.adjuntosCapLista.size()})</f:facet>
			 <div class="results" id="tbldetList" style=" overflow: scroll;  width:600 ;HEIGHT: 230px"  >
								   	<rich:dataTable id="items2List" var="_items"   first="0"
												value="#{configurarItemCapacitacioFC.adjuntosCapLista}"
											 rowKeyVar="rowNr">
												<rich:column  >
													<f:facet name="header">
														#{messages.CU537_ubicacion}
													</f:facet>
													<h:outputText rendered="#{_items.tipo=='IM1'}" value="#{messages.CU537_im1}" />
													<h:outputText rendered="#{_items.tipo=='IM2'}" value="#{messages.CU537_im2}" />
													<h:outputText rendered="#{_items.tipo=='IM3'}" value="#{messages.CU537_im3}" />
											</rich:column>
											<rich:column  >
													<f:facet name="header">
													#{messages.CU537_texto}
													</f:facet>
													<h:outputText value="#{_items.descripcion}" />
											</rich:column>
											
											<rich:column >
											<a:commandLink id="editDet2" value="#{messages.msg_edit}" 
								                    reRender="outPanelBotones,panelDocImp,datosPortalCapacitacion"  eventsQueue="default" 
								                    action="#{configurarItemCapacitacioFC.editar(_items.idAdjuntosCap)}" />
											</rich:column>
						</rich:dataTable>
					</div>
			
			</rich:panel>
		
          
		 
		

     

             <div style="clear:both">
                <span class="required">*</span>
               #{messages.msg_required_fields}
            </div>
<div style="clear:both">
            
          
        </div>

        </rich:panel>

     
    </h:form>
	

</ui:define>

</ui:composition>
